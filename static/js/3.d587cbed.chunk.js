(this["webpackJsonparduino-web-oscilloscope"]=this["webpackJsonparduino-web-oscilloscope"]||[]).push([[3],{502:function(e,t,r){"use strict";var n=r(9),i=r(243),a=r(244),s=r(245);Object.defineProperty(t,"__esModule",{value:!0});var o={baudrate:115200,databits:8,stopbits:1,parity:"none",buffersize:255,rtscts:!1,xon:!1,xoff:!1,xany:!1},c=[16,8,7,6,5],u=[1,2],f=["none","even","mark","odd","space"],l=["none","odd","even","mark","space"],p=[1,1.5,2],h=function(){function e(t,r){a(this,e),this.serialOptions_=Object.assign({},o,r),this.validateOptions(),this.setPort(t)}return s(e,[{key:"open",value:function(){var e=i(n.mark((function e(){var t,r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.device_.open();case 3:if(null!==this.device_.configuration){e.next=6;break}return e.next=6,this.device_.selectConfiguration(1);case 6:if(t=this.getTransferInterface(this.device_)){e.next=9;break}throw new Error("Unable to find data transfer interface.");case 9:if(this.transferInterface_=t,r=this.getControlInterface(this.device_)){e.next=13;break}throw new Error("Unable to find control interface.");case 13:return e.next=15,this.device_.claimInterface(r.interfaceNumber);case 15:return e.next=17,this.device_.claimInterface(this.transferInterface_.interfaceNumber);case 17:return e.next=19,this.setOptions();case 19:return e.next=21,this.device_.controlTransferOut({requestType:"class",recipient:"interface",request:34,value:1,index:r.interfaceNumber});case 21:this.in=new ReadableStream({start:this.readStart.bind(this)}),this.out=new WritableStream({write:this.write.bind(this)}),e.next=28;break;case 25:throw e.prev=25,e.t0=e.catch(0),new Error("Error setting up device: "+e.t0.toString());case 28:case"end":return e.stop()}}),e,this,[[0,25]])})));return function(){return e.apply(this,arguments)}}()},{key:"getInfo",value:function(){var e=i(n.mark((function e(){var t;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.device_.controlTransferIn({requestType:"class",recipient:"interface",request:33,value:0,index:0},7);case 2:if("ok"!==(t=e.sent).status){e.next=5;break}return e.abrupt("return",this.readLineCoding(t.data.buffer));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setOptions",value:function(e){var t=Object.assign({},this.serialOptions_,e);return this.serialOptions_=t,this.validateOptions(),this.setSerialOptions()}},{key:"setPort",value:function(t){if(!e.isSerialDevice(t))throw new TypeError("This is not a serial port");this.device_=t}},{key:"validateOptions",value:function(){if(!this.isValidBaudRate(this.serialOptions_.baudrate))throw new RangeError("invalid Baud Rate "+this.serialOptions_.baudrate);if(!this.isValidDataBits(this.serialOptions_.databits))throw new RangeError("invalid databits "+this.serialOptions_.databits);if(!this.isValidStopBits(this.serialOptions_.stopbits))throw new RangeError("invalid stopbits "+this.serialOptions_.stopbits);if(!this.isValidParity(this.serialOptions_.parity))throw new RangeError("invalid parity "+this.serialOptions_.parity)}},{key:"isValidBaudRate",value:function(e){return e%1===0}},{key:"isValidDataBits",value:function(e){return c.includes(e)}},{key:"isValidStopBits",value:function(e){return u.includes(e)}},{key:"isValidParity",value:function(e){return f.includes(e)}},{key:"writeStart",value:function(){var e=i(n.mark((function e(t){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"readStart",value:function(){var e=i(n.mark((function e(t){var r,a=this;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.getDirectionEndpoint("in")){e.next=4;break}return t.error(new Error("No IN endpoint available.")),e.abrupt("return");case 4:i(n.mark((function e(){var i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0;case 1:return e.next=3,a.device_.transferIn(r.endpointNumber,64);case 3:i=e.sent,t.enqueue(i.data);case 5:e.next=1;break;case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t.error(e.t0.toString());case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"write",value:function(){var e=i(n.mark((function e(t,r){var i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.getDirectionEndpoint("out")){e.next=4;break}return r.error(new Error("No OUT endpoint available.")),e.abrupt("return");case 4:if(!(t instanceof Uint8Array)){e.next=15;break}return e.prev=5,e.next=8,this.device_.transferOut(i.endpointNumber,t);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),r.error(e.t0.toString());case 13:e.next=16;break;case 15:throw new TypeError("Can only send Uint8Array please use transform stream to convert data to Uint8Array");case 16:case"end":return e.stop()}}),e,this,[[5,10]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setSerialOptions",value:function(){return this.device_.controlTransferOut({requestType:"class",recipient:"interface",request:32,value:0,index:0},this.getLineCodingStructure())}},{key:"readLineCoding",value:function(e){var t=this.serialOptions_,r=new DataView(e);return t.baudrate=r.getUint32(0,!0),t.stopbits=r.getUint8(4)<p.length?p[r.getUint8(4)]:1,t.parity=r.getUint8(5)<l.length?l[r.getUint8(5)]:"none",t.databits=r.getUint8(6),t}},{key:"getLineCodingStructure",value:function(){var e=new ArrayBuffer(7),t=new DataView(e);return t.setUint32(0,this.serialOptions_.baudrate,!0),t.setUint8(4,p.indexOf(this.serialOptions_.stopbits)),t.setUint8(5,l.indexOf(this.serialOptions_.parity)),t.setUint8(6,this.serialOptions_.databits),e}},{key:"getControlInterface",value:function(e){return this.getInterfaceWithClass(e,2)}},{key:"getTransferInterface",value:function(e){return this.getInterfaceWithClass(e,10)}},{key:"getInterfaceWithClass",value:function(e,t){var r;return e.configuration.interfaces.forEach((function(e){e.alternates.forEach((function(n){n.interfaceClass===t&&(r=e)}))})),r}},{key:"getDirectionEndpoint",value:function(e){var t;return this.transferInterface_.alternates.forEach((function(r){r.endpoints.forEach((function(r){r.direction==e&&(t=r)}))})),t}}],[{key:"isSerialDevice",value:function(e){if(!(e.configurations instanceof Array))return!1;var t=!1,r=!1;return e.configurations.forEach((function(e){e.interfaces instanceof Array&&e.interfaces.forEach((function(e){e.alternates instanceof Array&&e.alternates.forEach((function(e){10===e.interfaceClass&&(t=!0),2===e.interfaceClass&&(r=!0)}))}))})),t&&r}}]),e}();t.SerialPort=h;var v=function(){function e(){a(this,e)}return s(e,[{key:"requestPort",value:function(){var e=i(n.mark((function e(){var t,r,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[{classCode:10}],e.next=3,navigator.usb.requestDevice({filters:t});case 3:return r=e.sent,i=new h(r),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getPorts",value:function(){var e=i(n.mark((function e(){var t,r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.usb.getDevices();case 2:return t=e.sent,r=[],t.forEach((function(e){h.isSerialDevice(e)&&r.push(new h(e))})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();t.serial=new v},503:function(e,t,r){"use strict";r.r(t);var n=r(0),i=r.n(n),a=r(502),s=r.n(a);t.default=function(){return navigator.serial=s.a,i.a.createElement(i.a.Fragment,null)}}}]);
//# sourceMappingURL=3.d587cbed.chunk.js.map